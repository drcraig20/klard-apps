# SubscriptionCard Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Build a reusable SubscriptionCard that summarizes a subscription (logo, name, price cadence, next renewal, status, actions) for both web (Next.js/shadcn) and mobile (Expo), honoring Klard design tokens.

**Architecture:** Small, focused components per platform; data formatting helpers (price/date) kept local to card; styling via shadcn/tailwind on web and StyleSheet + theme hook on mobile. Status/size handled through CVA-style variants on web and style maps on mobile to keep SRP and OCP.

**Tech Stack:** Next.js App Router + React 19, Tailwind/shadcn/ui, class-variance-authority patterns, Vitest + Testing Library (web); Expo Router/React Native, expo-image, react-native-testing-library + Jest (mobile).

---

- **Component & Purpose:** `SubscriptionCard` renders subscription summary with service logo slot, service/plan labels, formatted price per cadence, next renewal label, status badge, optional primary action, loading and disabled overlays.
- **Target Platforms:** Web (`klard-web`, App Router) and Mobile (`klard-mobile`, Expo 54). Web first, then mobile parity.
- **Props (shared intent, platform-specific typing):**
  - `serviceName: string`
  - `planName?: string`
  - `amount: number`
  - `currency?: string` (default `USD`)
  - `billingPeriod?: 'month' | 'year'` (controls `/mo` or `/yr`)
  - `nextRenewalDate?: string | Date`
  - `status?: 'active' | 'trial' | 'paused' | 'canceled'`
  - `logoUrl?: string` (render via `ServiceLogo`/`expo-image`); `logoAlt?: string`
  - `highlight?: 'default' | 'price-increase' | 'payment-issue'` (affects border/indicator)
  - `isLoading?: boolean`
  - `isDisabled?: boolean`
  - `onClick?: () => void` (web), `onPress?: () => void` (mobile)
  - `actionLabel?: string`
  - `onAction?: () => void`
  - `className?/style?` for overrides
- **Visual States:** default; hover/focus (web); pressed (mobile); disabled (reduced opacity, pointer-events none); loading (skeleton shimmer/pulse); error/warning (price-increase/payment-issue highlight); success/active (teal accent); empty logo fallback.
- **Size Variants:** `comfortable` (default, padding 24px web / 16px mobile, text md) and `compact` (padding 16px web / 12px mobile, text sm) to support dense lists.
- **Color Tokens (from Klard Design System):**
  - Primary #0D7C7A (light) / #15B5B0 (dark) for highlights/buttons
  - Backgrounds: `bg-card` (`#1E293B` in dark) with glassy border, text `#F8FAFC`
  - Status mapping: active → teal, trial → sky, paused → amber, canceled → slate/neutral
  - Error/warning accents: Error #EF4444, Warning #F59E0B
- **Accessibility:** `data-slot` on root/logo/status/price; root uses `role="group"` (web) with `aria-label` summarizing subscription; focus ring for keyboard; onClick only when enabled; mobile uses `accessibilityRole="button"` when pressable and labels for price/status; logo alt passed through; ensures color + text for status (no color-only signals).
- **Dependencies:** Web → `Card`, `Badge`, `Button`, `cn` util, optional `Spinner`; Mobile → `expo-image`, `Pressable`, `useThemeColors` hook, `StyleSheet`, `Text`, `View`; optional `expo-haptics` for press feedback (skip if not needed). No reliance on unfinished `ServiceLogo`; accept `logoUrl` now.
- **SOLID Compliance**

| Component | SRP | OCP | LSP | ISP | DIP |
|-----------|-----|-----|-----|-----|-----|
| Web `SubscriptionCard` | Single responsibility: render subscription summary | Variants/data-driven props for size/status/highlight | Accepts all props without stricter preconditions; root still a card | Narrow props interface focused on display; no extra methods | Depends on abstractions (props, `cn`, design tokens) not concrete data sources |
| Mobile `SubscriptionCard` | Render subscription summary with RN primitives | Style maps and props drive changes, no code changes for new statuses | Substitutable as View/Pressable container | Props only for display/interaction | Depends on theme hook and props, not concrete stores |
| Format helpers | Only format price/date strings | Configurable locale/period without edit | Accept standard inputs consistently | No extra methods | Use Intl (web) and JS Date for RN; no global state |

- **Parallel Sub-Agent Strategy:** Execute sequentially in this session (Task tool unavailable) but mimic subagents by treating each task as isolated TDD loop with self-review after each pass; no overlapping file edits between tasks.
- **Test Strategy (TDD):** Web & mobile unit tests first (render, formatting, states, disabled/press), expect RED; implement minimal to GREEN; refactor if needed. Web: Vitest + RTL. Mobile: Jest + @testing-library/react-native with `expo-image` mock. Coverage for loading/disabled, status badge, price/renewal formatting, action callbacks, data-slot/testID presence.

---

### Task 1: SubscriptionCard (Web)

**Files:**
- Create: `klard-web/src/__tests__/components/ui/subscription-card.test.tsx`
- Create: `klard-web/src/components/ui/subscription-card.tsx`
- Modify: `klard-web/src/components/ui/index.ts`

**Step 1: Write the failing test**

```tsx
// klard-web/src/__tests__/components/ui/subscription-card.test.tsx
import { describe, it, expect, vi } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { SubscriptionCard, type SubscriptionCardProps } from '@/components/ui/subscription-card';

const baseProps: SubscriptionCardProps = {
  serviceName: 'Spotify',
  planName: 'Premium',
  amount: 9.99,
  currency: 'USD',
  billingPeriod: 'month',
  nextRenewalDate: '2025-01-15',
  status: 'active',
  logoUrl: 'https://cdn.example.com/logo.png',
  logoAlt: 'Spotify logo',
};

describe('SubscriptionCard (web)', () => {
  it('renders service info, plan, and price per cadence', () => {
    render(<SubscriptionCard {...baseProps} />);

    expect(screen.getByText('Spotify')).toBeInTheDocument();
    expect(screen.getByText('Premium')).toBeInTheDocument();
    expect(screen.getByText('$9.99/mo')).toBeInTheDocument();
  });

  it('formats next renewal date label', () => {
    render(<SubscriptionCard {...baseProps} nextRenewalDate={new Date('2025-01-15T00:00:00Z')} />);

    expect(screen.getByText('Renews Jan 15, 2025')).toBeInTheDocument();
  });

  it('renders status badge with correct label', () => {
    render(<SubscriptionCard {...baseProps} status="paused" />);

    const badge = screen.getByText(/Paused/i);
    expect(badge).toBeInTheDocument();
    expect(badge.getAttribute('data-slot')).toBe('subscription-status');
  });

  it('invokes onClick when interactive', () => {
    const handleClick = vi.fn();
    render(<SubscriptionCard {...baseProps} onClick={handleClick} />);

    const card = screen.getByRole('group');
    fireEvent.click(card);

    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('does not invoke onClick when disabled', () => {
    const handleClick = vi.fn();
    render(<SubscriptionCard {...baseProps} isDisabled onClick={handleClick} />);

    const card = screen.getByRole('group');
    fireEvent.click(card);

    expect(handleClick).not.toHaveBeenCalled();
  });

  it('shows loading skeleton when isLoading', () => {
    render(<SubscriptionCard {...baseProps} isLoading />);

    expect(screen.getByTestId('subscription-card-skeleton')).toBeInTheDocument();
    expect(screen.queryByText('Spotify')).toBeNull();
  });

  it('supports custom className', () => {
    const { container } = render(<SubscriptionCard {...baseProps} className="custom-class" />);
    expect(container.firstChild).toHaveClass('custom-class');
  });
});
```

**Step 2: Run test to verify it fails**  
Run: `pnpm --filter klard-web test src/__tests__/components/ui/subscription-card.test.tsx --run`  
Expected: FAIL (component not found / missing exports).

**Step 3: Write minimal implementation**

```tsx
// klard-web/src/components/ui/subscription-card.tsx
import * as React from "react";
import { Badge } from "./badge";
import { Button } from "./button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "./card";
import { cn } from "@/lib/utils";

export type SubscriptionStatus = "active" | "trial" | "paused" | "canceled";
export type SubscriptionHighlight = "default" | "price-increase" | "payment-issue";
export type SubscriptionSize = "comfortable" | "compact";

export interface SubscriptionCardProps extends React.ComponentProps<"div"> {
  serviceName: string;
  planName?: string;
  amount: number;
  currency?: string;
  billingPeriod?: "month" | "year";
  nextRenewalDate?: string | Date;
  status?: SubscriptionStatus;
  logoUrl?: string;
  logoAlt?: string;
  highlight?: SubscriptionHighlight;
  isLoading?: boolean;
  isDisabled?: boolean;
  actionLabel?: string;
  onAction?: () => void;
  onClick?: () => void;
  size?: SubscriptionSize;
}

const statusCopy: Record<SubscriptionStatus, string> = {
  active: "Active",
  trial: "Trial",
  paused: "Paused",
  canceled: "Canceled",
};

const statusClasses: Record<SubscriptionStatus, string> = {
  active: "bg-emerald-500/10 text-emerald-400",
  trial: "bg-sky-500/10 text-sky-400",
  paused: "bg-amber-500/10 text-amber-500",
  canceled: "bg-slate-600/30 text-slate-300",
};

function formatPrice(amount: number, currency: string, billingPeriod: "month" | "year") {
  const formatted = new Intl.NumberFormat("en-US", {
    style: "currency",
    currency,
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  }).format(amount);
  return billingPeriod === "year" ? `${formatted}/yr` : `${formatted}/mo`;
}

function formatRenewal(date: string | Date | undefined) {
  if (!date) return null;
  const parsed = typeof date === "string" ? new Date(date) : date;
  const label = new Intl.DateTimeFormat("en-US", { month: "short", day: "numeric", year: "numeric" }).format(parsed);
  return `Renews ${label}`;
}

export function SubscriptionCard({
  serviceName,
  planName,
  amount,
  currency = "USD",
  billingPeriod = "month",
  nextRenewalDate,
  status = "active",
  logoUrl,
  logoAlt,
  highlight = "default",
  isLoading,
  isDisabled,
  actionLabel,
  onAction,
  onClick,
  size = "comfortable",
  className,
  ...props
}: SubscriptionCardProps) {
  if (isLoading) {
    return (
      <Card
        data-slot="subscription-card"
        aria-busy="true"
        className={cn("animate-pulse", className)}
        {...props}
      >
        <CardContent className="flex flex-col gap-4">
          <div className="flex items-center gap-3">
            <div className="bg-muted h-10 w-10 rounded-lg" />
            <div className="space-y-2">
              <div className="bg-muted h-3 w-32 rounded-full" />
              <div className="bg-muted h-3 w-24 rounded-full" />
            </div>
          </div>
          <div className="bg-muted h-3 w-28 rounded-full" />
        </CardContent>
        <span className="sr-only">Loading subscription</span>
        <div data-testid="subscription-card-skeleton" />
      </Card>
    );
  }

  const renewal = formatRenewal(nextRenewalDate);
  const interactive = Boolean(onClick) && !isDisabled;
  const sizeClasses =
    size === "compact"
      ? "gap-3 px-4 py-4 text-sm"
      : "gap-4 px-6 py-6 text-base";

  return (
    <Card
      data-slot="subscription-card"
      role="group"
      aria-label={`${serviceName} subscription card`}
      onClick={interactive ? onClick : undefined}
      tabIndex={interactive ? 0 : -1}
      aria-disabled={isDisabled ? "true" : undefined}
      className={cn(
        "transition-shadow",
        isDisabled && "cursor-not-allowed opacity-60",
        interactive && "hover:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2",
        highlight === "price-increase" && "border-amber-400/70",
        highlight === "payment-issue" && "border-red-400/70",
        className
      )}
      {...props}
    >
      <CardHeader className={cn("flex flex-row items-start justify-between", sizeClasses)}>
        <div className="flex items-start gap-3">
          <div
            data-slot="subscription-logo"
            className="bg-muted flex h-12 w-12 items-center justify-center rounded-lg overflow-hidden"
          >
            {logoUrl ? (
              <img src={logoUrl} alt={logoAlt || `${serviceName} logo`} className="h-full w-full object-cover" />
            ) : (
              <span className="text-card-foreground text-sm font-semibold">
                {serviceName.slice(0, 2).toUpperCase()}
              </span>
            )}
          </div>
          <div className="flex flex-col">
            <CardTitle className="text-lg font-semibold leading-tight">{serviceName}</CardTitle>
            {planName ? (
              <CardDescription className="text-sm text-muted-foreground">{planName}</CardDescription>
            ) : null}
          </div>
        </div>
        <Badge data-slot="subscription-status" className={cn("capitalize", statusClasses[status])}>
          {statusCopy[status]}
        </Badge>
      </CardHeader>
      <CardContent className={cn("flex items-center justify-between", sizeClasses)}>
        <div className="flex flex-col gap-1">
          <div data-slot="subscription-price" className="text-xl font-semibold">
            {formatPrice(amount, currency, billingPeriod)}
          </div>
          {renewal ? (
            <div data-slot="subscription-renewal" className="text-muted-foreground text-sm">
              {renewal}
            </div>
          ) : null}
        </div>
        {actionLabel ? (
          <Button
            size={size === "compact" ? "sm" : "default"}
            variant="outline"
            disabled={isDisabled}
            onClick={(event) => {
              event.stopPropagation();
              if (!isDisabled) onAction?.();
            }}
          >
            {actionLabel}
          </Button>
        ) : null}
      </CardContent>
    </Card>
  );
}
```

Update export:

```ts
// klard-web/src/components/ui/index.ts
export { SubscriptionCard, type SubscriptionCardProps, type SubscriptionStatus } from './subscription-card';
```

**Step 4: Run test to verify it passes**  
Run: `pnpm --filter klard-web test src/__tests__/components/ui/subscription-card.test.tsx --run`  
Expected: PASS.

**Step 5: Commit**  
`git add klard-web/src/components/ui/subscription-card.tsx klard-web/src/__tests__/components/ui/subscription-card.test.tsx klard-web/src/components/ui/index.ts`

---

### Task 2: SubscriptionCard (Mobile)

**Files:**
- Create: `klard-mobile/src/__tests__/components/ui/SubscriptionCard.test.tsx`
- Create: `klard-mobile/src/components/ui/SubscriptionCard.tsx`
- Modify: `klard-mobile/src/components/ui/index.ts`

**Step 1: Write the failing test**

```tsx
// klard-mobile/src/__tests__/components/ui/SubscriptionCard.test.tsx
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react-native';
import { SubscriptionCard, type SubscriptionCardProps } from '@/components/ui/SubscriptionCard';

jest.mock('expo-image', () => ({
  Image: ({ source }: { source: string }) => <>{source ? <></> : null}</>,
}));

const baseProps: SubscriptionCardProps = {
  serviceName: 'Netflix',
  planName: 'Standard',
  amount: 15.49,
  currency: 'USD',
  billingPeriod: 'month',
  nextRenewalDate: '2025-02-10',
  status: 'active',
  logoUrl: 'https://cdn.example.com/netflix.png',
};

describe('SubscriptionCard (mobile)', () => {
  it('renders service info and price', () => {
    render(<SubscriptionCard {...baseProps} />);

    expect(screen.getByText('Netflix')).toBeTruthy();
    expect(screen.getByText('Standard')).toBeTruthy();
    expect(screen.getByText('$15.49/mo')).toBeTruthy();
  });

  it('formats renewal date', () => {
    render(<SubscriptionCard {...baseProps} nextRenewalDate={new Date('2025-02-10T00:00:00Z')} />);

    expect(screen.getByText('Renews Feb 10, 2025')).toBeTruthy();
  });

  it('shows status pill', () => {
    render(<SubscriptionCard {...baseProps} status="canceled" />);
    expect(screen.getByText('Canceled')).toBeTruthy();
  });

  it('triggers onPress when pressable', () => {
    const handlePress = jest.fn();
    render(<SubscriptionCard {...baseProps} onPress={handlePress} />);

    fireEvent.press(screen.getByTestId('subscription-card'));
    expect(handlePress).toHaveBeenCalledTimes(1);
  });

  it('does not trigger onPress when disabled', () => {
    const handlePress = jest.fn();
    render(<SubscriptionCard {...baseProps} isDisabled onPress={handlePress} />);

    fireEvent.press(screen.getByTestId('subscription-card'));
    expect(handlePress).not.toHaveBeenCalled();
  });

  it('shows loading skeleton when isLoading', () => {
    render(<SubscriptionCard {...baseProps} isLoading />);

    expect(screen.getByTestId('subscription-card-skeleton')).toBeTruthy();
    expect(screen.queryByText('Netflix')).toBeNull();
  });
});
```

**Step 2: Run test to verify it fails**  
Run: `pnpm --filter klard-mobile test src/__tests__/components/ui/SubscriptionCard.test.tsx --run`  
Expected: FAIL (component missing).

**Step 3: Write minimal implementation**

```tsx
// klard-mobile/src/components/ui/SubscriptionCard.tsx
import React from 'react';
import { View, Text, Pressable, StyleSheet } from 'react-native';
import { Image } from 'expo-image';
import { useThemeColors } from '@/hooks';

export type SubscriptionStatus = 'active' | 'trial' | 'paused' | 'canceled';
export type SubscriptionHighlight = 'default' | 'price-increase' | 'payment-issue';
export type SubscriptionSize = 'comfortable' | 'compact';

export interface SubscriptionCardProps {
  serviceName: string;
  planName?: string;
  amount: number;
  currency?: string;
  billingPeriod?: 'month' | 'year';
  nextRenewalDate?: string | Date;
  status?: SubscriptionStatus;
  logoUrl?: string;
  logoAlt?: string;
  highlight?: SubscriptionHighlight;
  isLoading?: boolean;
  isDisabled?: boolean;
  actionLabel?: string;
  onAction?: () => void;
  onPress?: () => void;
  size?: SubscriptionSize;
}

const statusCopy: Record<SubscriptionStatus, string> = {
  active: 'Active',
  trial: 'Trial',
  paused: 'Paused',
  canceled: 'Canceled',
};

function formatPrice(amount: number, currency: string, billingPeriod: 'month' | 'year') {
  const formatted = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency,
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  }).format(amount);
  return billingPeriod === 'year' ? `${formatted}/yr` : `${formatted}/mo`;
}

function formatRenewal(date?: string | Date) {
  if (!date) return null;
  const parsed = typeof date === 'string' ? new Date(date) : date;
  const label = new Intl.DateTimeFormat('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric',
  }).format(parsed);
  return `Renews ${label}`;
}

export function SubscriptionCard({
  serviceName,
  planName,
  amount,
  currency = 'USD',
  billingPeriod = 'month',
  nextRenewalDate,
  status = 'active',
  logoUrl,
  logoAlt,
  highlight = 'default',
  isLoading,
  isDisabled,
  onPress,
  size = 'comfortable',
}: SubscriptionCardProps) {
  const colors = useThemeColors();
  const renewal = formatRenewal(nextRenewalDate);
  const padding = size === 'compact' ? 12 : 16;

  if (isLoading) {
    return (
      <View
        testID="subscription-card-skeleton"
        style={[
          styles.card,
          { backgroundColor: colors.surface, borderColor: colors.border, padding },
          styles.skeleton,
        ]}
      >
        <View style={styles.skeletonRow}>
          <View style={[styles.skeletonBox, { width: 48, height: 48, backgroundColor: colors.muted }]} />
          <View style={styles.skeletonColumn}>
            <View style={[styles.skeletonBar, { width: 140, backgroundColor: colors.muted }]} />
            <View style={[styles.skeletonBar, { width: 100, backgroundColor: colors.muted }]} />
          </View>
        </View>
        <View style={[styles.skeletonBar, { width: 120, backgroundColor: colors.muted }]} />
      </View>
    );
  }

  const Container = onPress ? Pressable : View;
  const disabledStyle = isDisabled ? { opacity: 0.6 } : null;
  const highlightBorder =
    highlight === 'price-increase'
      ? { borderColor: '#F59E0B' }
      : highlight === 'payment-issue'
      ? { borderColor: '#EF4444' }
      : { borderColor: colors.border };

  return (
    <Container
      testID="subscription-card"
      accessibilityLabel={`${serviceName} subscription card`}
      accessibilityRole={onPress ? 'button' : 'summary'}
      onPress={isDisabled ? undefined : onPress}
      style={[
        styles.card,
        { backgroundColor: colors.surface, padding },
        highlightBorder,
        disabledStyle,
      ]}
    >
      <View style={styles.headerRow}>
        <View style={styles.logoContainer}>
          {logoUrl ? (
            <Image
              source={logoUrl}
              accessibilityLabel={logoAlt || `${serviceName} logo`}
              style={styles.logo}
              contentFit="cover"
            />
          ) : (
            <View style={[styles.logoFallback, { backgroundColor: colors.muted }]}>
              <Text style={[styles.logoInitials, { color: colors.text }]}>{serviceName.slice(0, 2).toUpperCase()}</Text>
            </View>
          )}
        </View>
        <View style={styles.titleColumn}>
          <Text style={[styles.serviceName, { color: colors.text }]}>{serviceName}</Text>
          {planName ? (
            <Text style={[styles.planName, { color: colors.mutedForeground }]}>{planName}</Text>
          ) : null}
        </View>
        <View style={[styles.statusPill, { backgroundColor: colors.muted }]}>
          <Text style={[styles.statusText, { color: colors.text }]}>{statusCopy[status]}</Text>
        </View>
      </View>
      <View style={styles.footerRow}>
        <View>
          <Text style={[styles.price, { color: colors.text }]}>{formatPrice(amount, currency, billingPeriod)}</Text>
          {renewal ? (
            <Text style={[styles.renewal, { color: colors.mutedForeground }]}>{renewal}</Text>
          ) : null}
        </View>
      </View>
    </Container>
  );
}

const styles = StyleSheet.create({
  card: {
    borderRadius: 12,
    borderWidth: 1,
    gap: 12,
  },
  headerRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
  },
  logoContainer: {
    width: 48,
    height: 48,
  },
  logo: {
    width: '100%',
    height: '100%',
    borderRadius: 10,
  },
  logoFallback: {
    flex: 1,
    borderRadius: 10,
    alignItems: 'center',
    justifyContent: 'center',
  },
  logoInitials: {
    fontWeight: '600',
  },
  titleColumn: {
    flex: 1,
    gap: 2,
  },
  serviceName: {
    fontSize: 18,
    fontWeight: '700',
  },
  planName: {
    fontSize: 14,
  },
  statusPill: {
    borderRadius: 9999,
    paddingHorizontal: 10,
    paddingVertical: 4,
  },
  statusText: {
    fontSize: 12,
    fontWeight: '600',
  },
  footerRow: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
  price: {
    fontSize: 20,
    fontWeight: '700',
  },
  renewal: {
    fontSize: 13,
    marginTop: 2,
  },
  skeleton: {
    borderRadius: 12,
    borderWidth: 1,
    gap: 10,
  },
  skeletonRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 10,
  },
  skeletonColumn: {
    gap: 6,
  },
  skeletonBox: {
    borderRadius: 8,
  },
  skeletonBar: {
    height: 10,
    borderRadius: 6,
  },
});
```

Update export:

```ts
// klard-mobile/src/components/ui/index.ts
export { SubscriptionCard, type SubscriptionCardProps } from './SubscriptionCard';
```

**Step 4: Run test to verify it passes**  
Run: `pnpm --filter klard-mobile test src/__tests__/components/ui/SubscriptionCard.test.tsx --run`  
Expected: PASS.

**Step 5: Commit**  
`git add klard-mobile/src/components/ui/SubscriptionCard.tsx klard-mobile/src/__tests__/components/ui/SubscriptionCard.test.tsx klard-mobile/src/components/ui/index.ts`

---

### Task 3: Verification & wrap-up

**Files:** `docs/screens/batch/Klard_Component_Specifications.md` (update marker to DONE after success)

**Step 1: Run full targeted checks**  
- `pnpm --filter klard-web test src/__tests__/components/ui/subscription-card.test.tsx --run`  
- `pnpm --filter klard-mobile test src/__tests__/components/ui/SubscriptionCard.test.tsx --run`  
- `pnpm --filter klard-web exec tsc --noEmit`  
- `pnpm --filter klard-mobile exec tsc --noEmit`

**Step 2: Verify exports & design alignment**  
- Confirm `subscription-card` exports in both `ui/index.ts` files.  
- Visual audit quickly (story not required) to ensure colors align with design tokens (teal/amber/red mapping).

**Step 3: Update spec marker**  
- Replace `<!-- IN-PROGRESS:5.2-subscription-card -->` with `<!-- DONE:5.2-subscription-card -->`.

**Step 4: Commit (if separate from platform commits)**  
`git add docs/screens/batch/Klard_Component_Specifications.md`  

**Step 5: Summarize**  
Prepare summary, tests run, and note any follow-ups (e.g., future integration with dedicated ServiceLogo component).
