# Implementation Plan: 1.2 Input Component

## Component Overview
**Name:** InputField (composed) + Input (base primitive)
**Purpose:** Text input for forms with support for labels, validation, icons, and various input types
**Platforms:** Web + Mobile

## Props Interface (from spec)

```typescript
interface InputFieldProps {
  type?: 'text' | 'email' | 'password' | 'search' | 'currency' | 'number';
  label?: string;
  placeholder?: string;
  value?: string;
  onChange?: (value: string) => void;
  error?: string;
  helperText?: string;
  disabled?: boolean;
  required?: boolean;
  leftIcon?: ReactNode;
  rightIcon?: ReactNode;
  autoFocus?: boolean;
  maxLength?: number;
}
```

## SOLID Compliance

| Component | SRP | OCP | LSP | ISP | DIP |
|-----------|-----|-----|-----|-----|-----|
| Input (base) | Renders input element only | N/A (primitive) | Extends HTML input | Single prop interface | N/A |
| InputField | Composes label + input + feedback | Extensible via props | Handles all input types | Segregated optional props | Depends on Input abstraction |

### Principle Applications

**SRP:**
- Base `Input` renders only the input element
- `InputField` composes label, input, icons, and feedback messages

**OCP:**
- Type variants via data-driven config (keyboard types, autocomplete)
- Icon positions via leftIcon/rightIcon props

**ISP:**
- All props optional except value/onChange for controlled inputs
- Label, error, helperText independently optional

**DIP:**
- InputField depends on Input abstraction
- Uses theme tokens via CSS variables/design system

---

## Web Implementation Plan

### Target File: `/klard-web/src/components/ui/input-field.tsx`

### Changes Required:

- [ ] Add `helperText` prop and display
- [ ] Add `required` prop with asterisk indicator
- [ ] Rename `icon` to `leftIcon`, add `rightIcon` prop
- [ ] Add `type` prop handling for search (clear button), number, email
- [ ] Use Tailwind classes aligned with design system
- [ ] Export types for external use

### Code Changes:

```typescript
interface InputFieldProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'> {
  label?: string;
  error?: string;
  helperText?: string;
  required?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
  onChange?: (value: string) => void;
}
```

### Visual States:
- [ ] default - border-slate-300
- [ ] hover - border-slate-400
- [ ] focus - border-primary, ring
- [ ] error - border-destructive, ring-destructive
- [ ] disabled - opacity-50, cursor-not-allowed

### Accessibility:
- [ ] `aria-invalid` when error present
- [ ] `aria-describedby` linking to error/helper text
- [ ] `aria-required` when required
- [ ] Label `htmlFor` linking to input `id`

---

## Mobile Implementation Plan

### Target File: `/klard-mobile/src/components/ui/input-field.tsx` (NEW)

### Changes from Auth InputField:

- [ ] Move to ui/ folder for general use
- [ ] Add `helperText` prop
- [ ] Add `required` prop with asterisk
- [ ] Rename `icon` to `leftIcon`, add `rightIcon`
- [ ] Add keyboard type mapping for email, number, currency
- [ ] Use Pressable for password toggle (better accessibility)
- [ ] Add Ionicons for eye/eye-off icons

### Keyboard Type Mapping:

```typescript
const keyboardTypeMap = {
  text: 'default',
  email: 'email-address',
  password: 'default',
  search: 'default',
  number: 'numeric',
  currency: 'decimal-pad',
};
```

### AutoCapitalize Mapping:

```typescript
const autoCapitalizeMap = {
  email: 'none',
  search: 'none',
  default: 'sentences',
};
```

### Visual States:
- [ ] default - border colors from theme
- [ ] focused - increased border width, ring color
- [ ] error - error border color
- [ ] disabled - reduced opacity

### Accessibility:
- [ ] accessibilityLabel on password toggle
- [ ] accessibilityHint for input purpose
- [ ] accessibilityRole="textbox"

---

## Dependencies

### Web:
- `lucide-react` (Eye, EyeOff icons)
- `@/lib/utils` (cn function)

### Mobile:
- `@expo/vector-icons` (Ionicons)
- `@/hooks/useThemeColors`
- `react-native` (TextInput, View, Text, Pressable)

---

## Verification Checklist

### Web:
- [ ] Component renders without errors
- [ ] All props implemented and typed
- [ ] All states functional (default, hover, focus, error, disabled)
- [ ] Matches design system colors
- [ ] Accessibility attributes present
- [ ] TypeScript passes with no errors

### Mobile:
- [ ] Component renders without errors
- [ ] All props implemented and typed
- [ ] Keyboard types work correctly
- [ ] Password toggle functional
- [ ] Focus states visible
- [ ] Accessibility labels present
- [ ] TypeScript passes with no errors

---

## Test Scenarios

1. Text input with label
2. Email input with validation error
3. Password input with show/hide toggle
4. Search input with clear button (rightIcon)
5. Input with both icons
6. Required field with asterisk
7. Input with helper text
8. Disabled input
9. Input with maxLength

---

## Files to Create/Modify

| Action | File |
|--------|------|
| Modify | `/klard-web/src/components/ui/input-field.tsx` |
| Create | `/klard-mobile/src/components/ui/input-field.tsx` |
| Create | `/klard-mobile/src/components/ui/index.ts` (if not exists) |

---

## Commit Message (after completion)

```
feat(ui): enhance Input component with full spec compliance

- Add helperText, required, leftIcon/rightIcon props
- Implement keyboard type mapping for mobile
- Add accessibility attributes
- Align with Klard design system
```